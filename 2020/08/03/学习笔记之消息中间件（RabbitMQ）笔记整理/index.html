<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>学习笔记之消息中间件（RabbitMQ）的学习 | Mr.ou`s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="本次的笔记整理的主要是在Linux下安装RabbitMQ，并且如果使用Java代码在IDEA中去使用RabbitMQ，如果对Linux不熟悉的话，请看我之前的笔记。 Linux的学习（一） Linux的学习（二）基本命令 Linux的学习（三）  本次演示的安装包版本为（centos 6.5）：otp_src_22.0.tar.gzrabbitmq-server-generic-unix-3.7.">
<meta property="og:type" content="article">
<meta property="og:title" content="学习笔记之消息中间件（RabbitMQ）的学习">
<meta property="og:url" content="http://example.com/2020/08/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%88RabbitMQ%EF%BC%89%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="Mr.ou&#96;s Blog">
<meta property="og:description" content="本次的笔记整理的主要是在Linux下安装RabbitMQ，并且如果使用Java代码在IDEA中去使用RabbitMQ，如果对Linux不熟悉的话，请看我之前的笔记。 Linux的学习（一） Linux的学习（二）基本命令 Linux的学习（三）  本次演示的安装包版本为（centos 6.5）：otp_src_22.0.tar.gzrabbitmq-server-generic-unix-3.7.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803162839321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803162959836.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803163052256.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803163237823.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803163256114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080316430276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803164354448.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803164410580.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803164434188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803164458793.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803164530202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803164551889.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803165342957.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803165438843.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803170509223.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803170537714.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803170602162.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803170759782.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803171300534.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803171328613.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803171730598.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080317180351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803171826364.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803171945850.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803172225492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803172314644.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803172415966.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080317243722.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020080317252076.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803172652702.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803172716915.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803173021902.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803173349625.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803173526227.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803173844110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803173916321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803174026786.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803174429956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803180700932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803180749575.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803181036453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="og:image" content="https://img-blog.csdnimg.cn/20200803181132757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
<meta property="article:published_time" content="2020-08-03T10:20:12.000Z">
<meta property="article:modified_time" content="2020-08-16T16:20:54.353Z">
<meta property="article:author" content="Mr.ou">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="RabbitMQ学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/20200803162839321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70">
  
    <link rel="alternate" href="/atom.xml" title="Mr.ou`s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Mr.ou`s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-学习笔记之消息中间件（RabbitMQ）笔记整理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%88RabbitMQ%EF%BC%89%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/" class="article-date">
  <time datetime="2020-08-03T10:20:12.000Z" itemprop="datePublished">2020-08-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/">消息中间件</a>►<a class="article-category-link" href="/categories/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      学习笔记之消息中间件（RabbitMQ）的学习
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本次的笔记整理的主要是在Linux下安装RabbitMQ，并且如果使用Java代码在IDEA中去使用RabbitMQ，如果对Linux不熟悉的话，请看我之前的笔记。</p>
<a href="/2020/07/15/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BLinux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9ALinux%E5%AE%89%E8%A3%85%E4%BB%A5%E5%8F%8A%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D%E3%80%81Xshell%E7%BB%88%E7%AB%AF%E7%9A%84%E5%AE%89%E8%A3%85/" title="Linux的学习（一）">Linux的学习（一）</a>
<a href="/2020/07/16/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BLinux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9ALinux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D/" title="Linux的学习（二）基本命令">Linux的学习（二）基本命令</a>
<a href="/2020/07/17/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BLinux%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E5%8D%A1%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E3%80%81%E9%85%8D%E7%BD%AEJDK%E3%80%81%E4%BB%A5%E5%8F%8Atomcat%E7%9A%84%E5%AE%89%E8%A3%85/" title="Linux的学习（三）">Linux的学习（三）</a>

<p>本次演示的安装包版本为（centos 6.5）：<br>otp_src_22.0.tar.gz<br>rabbitmq-server-generic-unix-3.7.17.tar.xz<br>安装包的百度云链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1mw4bW6RLxFm4RoV-i9vB3A">https://pan.baidu.com/s/1mw4bW6RLxFm4RoV-i9vB3A</a><br>提取码：bnfy</p>
<h1 id="本文主要内容"><a href="#本文主要内容" class="headerlink" title="本文主要内容"></a>本文主要内容</h1><p><strong>主要内容</strong></p>
<ol>
<li>AMQP 简介</li>
<li>RabbitMQ 简介</li>
<li>RabbitMQ 原理</li>
<li>Erlang 安装</li>
<li>安装 RabbitMQ</li>
<li>RabbitMQ 账户管理</li>
<li>交换器</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200803162839321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="一、AMQP简介"><a href="#一、AMQP简介" class="headerlink" title="一、AMQP简介"></a>一、AMQP简介</h1><h2 id="1-AMQP-是什么"><a href="#1-AMQP-是什么" class="headerlink" title="1 AMQP 是什么?"></a>1 AMQP 是什么?</h2><p>AMQP(Advanced Message Queuing Protocol,高级消息队列协议)是进程之间传递异步消息的网络协议。</p>
<h2 id="2-AMQP-工作过程"><a href="#2-AMQP-工作过程" class="headerlink" title="2 AMQP 工作过程"></a>2 AMQP 工作过程</h2><p>发布者(Publisher)发布消息(Message),经过交换机(Exchange)，交换机根据路由规则将收到消息分发给交换机绑定的队列(Queue)，最后 AMQP 代理会将消息投递给订阅了此队列的消费者，或者消费者按照需求自行获取。<br><img src="https://img-blog.csdnimg.cn/20200803162959836.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="3-队列"><a href="#3-队列" class="headerlink" title="3 队列"></a>3 队列</h2><p>队列是数据结构中概念。数据存储在一个队列中，数据是有顺序的，<strong>先进的先出，后进后出</strong>。其中一侧负责进数据，另一次负责出数据。<br>        <strong>MQ（消息队列）很多功能都是基于此队列结构实现的</strong><br><img src="https://img-blog.csdnimg.cn/20200803163052256.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="二、RabbitMQ简介"><a href="#二、RabbitMQ简介" class="headerlink" title="二、RabbitMQ简介"></a>二、RabbitMQ简介</h1><h2 id="1-RabbitMQ-介绍"><a href="#1-RabbitMQ-介绍" class="headerlink" title="1 RabbitMQ 介绍"></a>1 RabbitMQ 介绍</h2><p>RabbitMQ 是由 Erlang 语言编写的基于 AMQP 的消息中间件。而消息中间件作为分布式系统重要组件之一，可以解决应用耦合，异步消息，流量削峰等问题。</p>
<p>同时符合当前互联网需求的高并发、大吞吐、多线程三个特点。所以它是一个特别重要的组件，特别是在分布式系统中，可以帮我们做一些解耦和、同步转异步、流量削峰等等。最核心的就是同步转异步。</p>
<h3 id="1-1-解决应用耦合"><a href="#1-1-解决应用耦合" class="headerlink" title="1.1 解决应用耦合"></a>1.1 解决应用耦合</h3><p><strong>1.1.1 不使用 MQ 时</strong><br><img src="https://img-blog.csdnimg.cn/20200803163237823.png" alt="在这里插入图片描述"></p>
<p><strong>1.1.2 使用 MQ 解决耦合</strong><br><img src="https://img-blog.csdnimg.cn/20200803163256114.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>应用方式间接处理，类似于RPC远程调用一样，我们可以发现，不管是用RPC来写代码、或者是用RMI技术来写代码、还是用Dubbo技术来写代码，Provider和Consumer都是有关系的，他们的关系连接点是那个标准接口，而Provider和Consumer他们之间是有耦合度的，这个耦合度就在那个接口上，Provider没有实现接口的话，Consumer就不能去调用，Consumer没有去使用这个接口就找不到Provider。</p>
<h2 id="2-RabbitMQ-适用场景（同步–-gt-异步）"><a href="#2-RabbitMQ-适用场景（同步–-gt-异步）" class="headerlink" title="2 RabbitMQ 适用场景（同步–&gt;异步）"></a>2 RabbitMQ 适用场景（同步–&gt;异步）</h2><p> 排队算法、秒杀活动、消息分发、异步处理、数据同步、处理耗时任务（离线处理）、流量销峰等。</p>
<p><strong>举个例子：</strong><br>比如说怎么做流量削峰呢？首先可以将上面两张图中的A看做是淘宝，相当于页面显示，而应用程序B相当于数据处理，也就是做数据的增删改查的，比如到了双十一，客户在页面找商品，然后下订单，由于双十一很多客户买东西，也就是并发更多、这个时候的消费比平时是更强的、产生流水量也是更大的，假如下订单峰值达到几亿个数据，那这个时候的压力太大了，那么这个时候如果去做数据库的写操作，这么高的并发所用的反应时间就会很长，比如说这个时间是5-10S，那么一个用户点击下订单的时候，页面就白了，等5-10s客户可能就不停的刷新，这样体验感就变得很差，如果是加服务器数量的话，双十一过去之后就没那么多人买东西了，这个时候就造成资源的浪费了，在这种情况下就有了MQ给你解决这个问题，当还是有几亿个用户下订单的时候，A就会把数据封装起来放到MQ中，然后A就会和客户说（返回一个页面），订单下定成功了请稍后结算，下订单到回复给客户的这个时间可能就只有1s左右的时间，在用户思考或者等待的时间当中，B应用在不停的往数据库中录入数据，这样用户的体验感就会好很多。</p>
<p><strong>流量削峰其实就是将原来的同步等待的时间变成了异步，让用户不在一个空白的页面等待页面反应过来</strong></p>
<p><strong>再举个例子：我们最爱的抢红包</strong><br>比如说：100个人抢10个红包，发红包时100个人一起点击红包去抢，100个客户端中找出手最快的10个人，于是先将消息放入到MQ当中，由于MQ中使用的是队列，特点是先进先出，将这100个请求放到队列当中，消费端将前十个处理掉，剩下90个就返回回去通知手慢了。</p>
<p><strong>只要是想要将同步处理转为异步处理，都可以考虑MQ，整体来说就是并发的并行转成并发的串行，变成一个排队的机制。串行的话Consumer是可以集群的，所以速度不会变低。</strong></p>
<h1 id="三、-RabbitMQ-原理"><a href="#三、-RabbitMQ-原理" class="headerlink" title="三、 RabbitMQ 原理"></a>三、 RabbitMQ 原理</h1><p><img src="https://img-blog.csdnimg.cn/2020080316430276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803164354448.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803164410580.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803164434188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803164458793.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803164530202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803164551889.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="四、-Erlang-安装"><a href="#四、-Erlang-安装" class="headerlink" title="四、 Erlang 安装"></a>四、 Erlang 安装</h1><p> RabbitMQ 是使用 Erlang 语言编写的，所以需要先配置 Erlang<br>本次时在Linux下安装otp_src_22.0.tar.gz</p>
<p>前提准备：</p>
<h2 id="1-修改主机名"><a href="#1-修改主机名" class="headerlink" title="1 修改主机名"></a>1 修改主机名</h2><p>RabbitMQ 是通过主机名进行访问的，必须指定能访问的主机名。我这里将主机名改为了oldou-mq<br>使用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;sysconfig&#x2F;network</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200803165342957.png" alt="在这里插入图片描述"><br><strong>修改hosts：</strong><br>使用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;hosts</span><br><span class="line">        新添加了一行，前面为服务器 ip，空格后面添加计算机主机名</span><br></pre></td></tr></table></figure>
<p><strong>注意：我这里的192.168.15.132是我的linux的IP地址，到时候填自己的IP地址就行了</strong><br><img src="https://img-blog.csdnimg.cn/20200803165438843.png" alt="在这里插入图片描述"><br>修改好以上两个就可以进行下一步了。</p>
<h2 id="2-安装依赖"><a href="#2-安装依赖" class="headerlink" title="2 安装依赖"></a>2 安装依赖</h2><p>执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel unixODBC unixODBC-devel</span><br></pre></td></tr></table></figure>
<h2 id="3-上传文件并解压"><a href="#3-上传文件并解压" class="headerlink" title="3 上传文件并解压"></a>3 上传文件并解压</h2><p>我在root目录下创建了一个temp目录，专门用于上传文件。<br>这里我使用的是lrzsz上传的文件，如果不会使用这个就去目录出查看我之前的笔记。</p>
<p>上传 otp_src_22.0.tar.gz 到/root/temp 目录中，进入目录并解压。<br>解压时注意，此压缩包不具有 gzip 属性，解压参数没有 z，只有 xf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;root&#x2F;temp    到temp目录下</span><br><span class="line">rz    使用rz命令进行上传，这里我之前安装了lrzsz</span><br><span class="line">tar -xf otp_src_22.0.tar.gz     进行解压</span><br></pre></td></tr></table></figure>
<h2 id="4-配置参数"><a href="#4-配置参数" class="headerlink" title="4 配置参数"></a>4 配置参数</h2><p>(1)先新建/usr/local/erlang 文件夹，作为安装文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;usr&#x2F;local&#x2F;erlang</span><br></pre></td></tr></table></figure>
<p>(2)进入解压后的文件夹中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd otp_src_22.0</span><br></pre></td></tr></table></figure>
<p>配置参数(直接复制执行)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;erlang --with-ssl --enable-threads --enable-smp-support --enable-kernel-poll --enable-hipe --without-javac</span><br></pre></td></tr></table></figure>
<p>以上配置的解释，<br>–prefix=/usr/local/erlang    这个是配置安装目录；<br>–with-ssl    这个是要不要提供加密；<br>–enable-threads    这个是开启多线程并发处理；<br>–enable-smp-support    这个是提供smp协议支持信息；<br>–enable-kernel-poll    这个是提供内核池处理能力，因为它使用了操作系统内核线程池，所以erlang在做高并发处理、多线程处理时才那么快；<br>–enable-hipe   这个是开启XX模式<br>–without-javac   这个是不提供javac的编译处理能力；</p>
<h2 id="5-编译并安装"><a href="#5-编译并安装" class="headerlink" title="5 编译并安装"></a>5 编译并安装</h2><p>在解压后的文件目录下，直接使用以下命令编译并运行。<br>时间可能会比较长，要耐心等待。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>安装成功之后是下图所示：<br><img src="https://img-blog.csdnimg.cn/20200803170509223.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>之后可以进入到安装目录中查看，<strong>cd /usr/local/erlang/</strong>   使用ls命令查看安装目录，然后在进入到bin目录下可以看到全是可执行文件。<br><img src="https://img-blog.csdnimg.cn/20200803170537714.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>退回到erlang目录下，执行bin/erl -version查看版本信息。<br><img src="https://img-blog.csdnimg.cn/20200803170602162.png" alt="在这里插入图片描述"><br>当你看到以上的版本号的时候就说明erlang安装成功了。<br>接下来去配置环境变量，让erlang可以在任意位置执行。</p>
<h2 id="6-修改环境变量"><a href="#6-修改环境变量" class="headerlink" title="6 修改环境变量"></a>6 修改环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(1)修改&#x2F;etc&#x2F;profile 文件</span><br><span class="line">vim &#x2F;etc&#x2F;profile</span><br><span class="line">        </span><br><span class="line">(2)在文件中添加下面代码</span><br><span class="line">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;erlang&#x2F;bin</span><br><span class="line"></span><br><span class="line">(3)运行文件，让修改内容生效</span><br><span class="line">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>
<h2 id="7-查看配置是否成功"><a href="#7-查看配置是否成功" class="headerlink" title="7 查看配置是否成功"></a>7 查看配置是否成功</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">erl -version</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200803170759782.png" alt="在这里插入图片描述"><br>这个时候你不用在erlang的bin目录下也能执行erlang的一些文件命令了。</p>
<h1 id="五、-安装RabbitMQ"><a href="#五、-安装RabbitMQ" class="headerlink" title="五、 安装RabbitMQ"></a>五、 安装RabbitMQ</h1><p>本次安装的RabbitMQ的版本为：rabbitmq-server-generic-unix-3.7.17.tar.xz</p>
<h2 id="1-上传文件并解压"><a href="#1-上传文件并解压" class="headerlink" title="1 上传文件并解压"></a>1 上传文件并解压</h2><p>上传 rabbitmq-server-generic-unix-3.7.17.tar.xz 到/root/temp 中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;root&#x2F;temp</span><br><span class="line">tar -xf rabbitmq-server-generic-unix-3.7.17.tar.xz</span><br></pre></td></tr></table></figure>
<h2 id="2-将解压后的文件移动到-local-下"><a href="#2-将解压后的文件移动到-local-下" class="headerlink" title="2 将解压后的文件移动到 local 下"></a>2 将解压后的文件移动到 local 下</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv rabbitmq_server-3.7.17&#x2F; &#x2F;usr&#x2F;local&#x2F;rabbitmq</span><br></pre></td></tr></table></figure>
<h2 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3 配置环境变量"></a>3 配置环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;profile</span><br><span class="line"></span><br><span class="line">在文件中添加</span><br><span class="line">export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;rabbitmq&#x2F;sbin</span><br><span class="line"></span><br><span class="line">解析文件</span><br><span class="line">source &#x2F;etc&#x2F;profile</span><br></pre></td></tr></table></figure>

<h2 id="4-开启-web-管理插件"><a href="#4-开启-web-管理插件" class="headerlink" title="4 开启 web 管理插件"></a>4 开启 web 管理插件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">进入 rabbitmq&#x2F;sbin 目录</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;rabbitmq&#x2F;sbin</span><br><span class="line"></span><br><span class="line">查看插件列表</span><br><span class="line">.&#x2F;rabbitmq-plugins list</span><br><span class="line"></span><br><span class="line">生效管理插件</span><br><span class="line">.&#x2F;rabbitmq-plugins enable rabbitmq_management</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20200803171300534.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>插件安装成功之后，在rabbitMQ的安装目录下的etc目录下可以查看到以下内容：<br><img src="https://img-blog.csdnimg.cn/20200803171328613.png" alt="在这里插入图片描述"></p>
<h2 id="5-后台运行RabbitMQ"><a href="#5-后台运行RabbitMQ" class="headerlink" title="5 后台运行RabbitMQ"></a>5 后台运行RabbitMQ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> 启动 rabbitmq。</span><br><span class="line"> .&#x2F;rabbitmq-server -detached</span><br><span class="line"></span><br><span class="line">停止命令     .&#x2F;rabbitmqctl stop_app</span><br><span class="line">如果无法停止，使用 kill -9 进程号进行关闭 </span><br><span class="line">使用这个命令查看进程    ps aux|grep rabbitmq       </span><br><span class="line">然后在使用 keil -9 进程号  杀掉进程就OK了</span><br></pre></td></tr></table></figure>
<p><strong>举个例子：</strong><br><img src="https://img-blog.csdnimg.cn/20200803171730598.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>启动成功信息如下（两张图）</strong>：<br><img src="https://img-blog.csdnimg.cn/2020080317180351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200803171826364.png" alt="在这里插入图片描述"></p>
<h3 id="5-1-启动错误解决"><a href="#5-1-启动错误解决" class="headerlink" title="5.1 启动错误解决"></a>5.1 启动错误解决</h3><p>如果启动 RabbitMQ 发生下述错误，可以提供环境配置文件，解决。环境配置文件命名为: rabbitmq-env.conf。所在位置是： $rabbitmq_home/etc/rabbitmq/目录。内容是： HOSTNAME=主机名称<br><img src="https://img-blog.csdnimg.cn/20200803171945850.png" alt="在这里插入图片描述"><br>在rabbitmq/etc/rabbitmq的安装目录下vim rabbitmq-env.conf<br>添加内容如下所示：<br>HOSTNAME=oldou-mq</p>
<p><strong>注意：这里的oldou-mq是我之前配置的主机名称</strong></p>
<h2 id="6-查看-web-管理界面"><a href="#6-查看-web-管理界面" class="headerlink" title="6 查看 web 管理界面"></a>6 查看 web 管理界面</h2><p>默认可以在安装 rabbitmq 的电脑上通过用户名：guest 密码 guest 进行访问 web 管理界面<br>        端口号：15672（放行端口，或关闭防火墙）<br>        在虚拟机浏览器中输入：<br>         <a target="_blank" rel="noopener" href="http://ip:15672/">http://ip:15672</a></p>
<p>启动成功之后，在关闭防火墙的前提下，去浏览器输入linux的主机IP和端口好就能进行访问。<br><img src="https://img-blog.csdnimg.cn/20200803172225492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="六、-RabbitMQ-账户管理"><a href="#六、-RabbitMQ-账户管理" class="headerlink" title="六、 RabbitMQ 账户管理"></a>六、 RabbitMQ 账户管理</h1><h2 id="1-创建账户"><a href="#1-创建账户" class="headerlink" title="1 创建账户"></a>1 创建账户</h2><pre><code>    先进入到sbin目录下：  cd /usr/local/rabbitmq/sbin
    语法：
    ./rabbitmqctl add_user username password</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200803172314644.png" alt="在这里插入图片描述"><br>创建完之后的用户默认是没有权限的。</p>
<h2 id="2-给用户授予管理员角色"><a href="#2-给用户授予管理员角色" class="headerlink" title="2 给用户授予管理员角色"></a>2 给用户授予管理员角色</h2><p> 其中 smallming 为新建用户的用户名<br>**./rabbitmqctl set_user_tags admin administrator**<br><img src="https://img-blog.csdnimg.cn/20200803172415966.png" alt="在这里插入图片描述"></p>
<h2 id="3-给用户授权"><a href="#3-给用户授权" class="headerlink" title="3 给用户授权"></a>3 给用户授权</h2><pre><code>    “/” 表示 RabbitMQ 根虚拟主机
    admin 表示用户名
    &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; 表示完整权限
    ./rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</code></pre>
<p><img src="https://img-blog.csdnimg.cn/2020080317243722.png" alt="在这里插入图片描述"></p>
<h2 id="4-登录"><a href="#4-登录" class="headerlink" title="4 登录"></a>4 登录</h2><p>使用新建账户和密码在 windows 中访问 rabbitmq 并登录<br>在浏览器地址栏输入：<br>                <a target="_blank" rel="noopener" href="http://ip:15672/">http://ip:15672/</a><br>用户名：oldou<br>密码：oldou<br>这样就能登录进去了。<br><img src="https://img-blog.csdnimg.cn/2020080317252076.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="七、-Exchange-交换器（交换机）"><a href="#七、-Exchange-交换器（交换机）" class="headerlink" title="七、 Exchange 交换器（交换机）"></a>七、 Exchange 交换器（交换机）</h1><p>交换器负责接收客户端传递过来的消息，并转发到对应的队列中。在 RabbitMQ 中支持四种交换器</p>
<p><strong>1. Direct Exchange：直连交换器（默认）<br>2. Fanout Exchange：扇形交换器<br>3. Topic Exchange：主题交换器</strong><br>4. Header Exchange：首部交换器。</p>
<p>在 RabbitMq 的 Web 管理界面中 Exchanges 选项卡就可以看见这四个交换器。<br><img src="https://img-blog.csdnimg.cn/20200803172652702.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="1-direct-交换器（点对点）"><a href="#1-direct-交换器（点对点）" class="headerlink" title="1 direct 交换器（点对点）"></a>1 direct 交换器（点对点）</h2><p><img src="https://img-blog.csdnimg.cn/20200803172716915.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>direct 交换器是 RabbitMQ 默认交换器。默认会进行公平调度。所有接受者依次从消息队列中获取值。Publisher 给哪个队列发消息，就一定是给哪个队列发送消息。对交换器绑定的其他队列没有任何影响。<br>        （代码演示）一个队列需要绑定多个消费者<br>        需要使用注解/API：<br>                org.springframework.amqp.core.Queue:队列<br>                AmqpTemplate：操作 RabbitMQ 的接口。负责发送或接收消息<br>                @RabbitListener(queues = “”) 注解某个方法为接收消息方法</p>
<p>接下来我们便使用代码来实现。</p>
<h3 id="1-1-代码实现"><a href="#1-1-代码实现" class="headerlink" title="1.1 代码实现"></a>1.1 代码实现</h3><h4 id="1-1-1-新建项目（01rabbirMQdirect）"><a href="#1-1-1-新建项目（01rabbirMQdirect）" class="headerlink" title="1.1.1 新建项目（01rabbirMQdirect）"></a>1.1.1 新建项目（01rabbirMQdirect）</h4><p>测试项目结构为：<br><img src="https://img-blog.csdnimg.cn/20200803173021902.png" alt="在这里插入图片描述"></p>
<p><strong>1.1.1.1  添加父pom依赖</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;</span><br><span class="line">         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;groupId&gt;com.oldou&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;01rabbirMQ-direct&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;packaging&gt;pom&lt;&#x2F;packaging&gt;</span><br><span class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;modules&gt;</span><br><span class="line">        &lt;module&gt;amqp-rabbit-consumer&lt;&#x2F;module&gt;</span><br><span class="line">    &lt;&#x2F;modules&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--添加依赖管理项--&gt;</span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.2.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;&#x2F;dependencies&gt;</span><br><span class="line">    &lt;&#x2F;dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;!--SpringBoot提供的关于AMQP协议实现的启动器，可以使用AMQP协议快速访问MQ消息中间件--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-amqp&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>
<p>然后在该项目下新建一个Model—- amqp-rabbit-consumer<br>然后在该文件下新建一个类InfoLogConsumer<br><strong>1.1.1.2  编写消息类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">package com.rabbit.consumer;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.*;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 日志消息消费者，只消费 Info 日志</span><br><span class="line"> * 日志消息存储在队列中 log-info-queue</span><br><span class="line"> * 使用的交换器名称为 log-ex-direct</span><br><span class="line"> * 交换器类型是 direct</span><br><span class="line"> * 队列的路由键是 direct-rk-info</span><br><span class="line"> *</span><br><span class="line"> * 注解 @RabbitListener - 监听注释。可以描述类型和方法</span><br><span class="line"> *  类型 - 当前类型监听某个队列</span><br><span class="line"> *  方法 - 当前方法监听某个队列</span><br><span class="line"> *  属性 -</span><br><span class="line"> *      bindings - QueueBinding[] 类型，代表这个类或者方法监听的队列、交换器、路由键的绑定方式。</span><br><span class="line"> *</span><br><span class="line"> * 注解 @QueueBinding</span><br><span class="line"> *  属性 -</span><br><span class="line"> *      value - 绑定监听的队列是什么</span><br><span class="line"> *      exchange - 队列对应的交换器是什么</span><br><span class="line"> *      key - 队列的路由键是什么</span><br><span class="line"> *  注解 -</span><br><span class="line"> *    @Queue - 描述一个队列</span><br><span class="line"> *      属性 -</span><br><span class="line"> *          value|name - 队列名称</span><br><span class="line"> *          autoDelete - 是否自动删除，默认为&quot;&quot;，</span><br><span class="line"> *              如果队列名称定义，不自动删除；队列名称不定义，队列为自动删除队列</span><br><span class="line"> *              如果是自动删除，代表的所有的consumer关闭后，队列自动删除。</span><br><span class="line"> *    @Exchange - 描述一个交换器</span><br><span class="line"> *      属性 -</span><br><span class="line"> *          value|name - 交换器名称</span><br><span class="line"> *          autoDelete - 是否自动删除，默认为&quot;&quot;,就是自动删除，可选false，非自动删除</span><br><span class="line"> *&#x2F;</span><br><span class="line">@RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">    @QueueBinding(</span><br><span class="line">        value &#x3D; @Queue(value &#x3D; &quot;log-info-queue&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">        exchange &#x3D; @Exchange(value &#x3D; &quot;log-ex-direct&quot;,type &#x3D; &quot;direct&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">        key &#x3D; &quot;direct-rk-info&quot;</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line">@Component</span><br><span class="line">public class InfoLogConsumer &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 消息消费的方法。当队列log-inf-queue中出现消息，立即消费。</span><br><span class="line">     * @param msg 消息内容</span><br><span class="line">     *</span><br><span class="line">     *  注解 @RabbitHandler - 配合类型上的@RabbitListener注解</span><br><span class="line">     *     作用：标记当前的方法是一个监听消息队列，消费消息的方法。</span><br><span class="line">     *</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @RabbitHandler()</span><br><span class="line">    public void onMessage(String msg)&#123;</span><br><span class="line">        System.out.println(&quot;InfoLogConsumer 消费消息 &quot;+ msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>1.1.1.3  编写配置文件</strong><br>新建 application.yml.<br>我们如果不配置这个文件的话，以下就为默认值：<br>host:默认值 localhost<br>username 默认值：guest<br>password 默认值：guest<br>配置文件内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  rabbitmq:</span><br><span class="line">    host: 192.168.15.132  # RabbitMQ服务的地址，默认localhost</span><br><span class="line">    post: 5672  #RabbitMQ的端口，默认是5672 注意：5672是TCP协议的端口，15672是http协议的端口</span><br><span class="line">    username: oldou  #访问RabbitMQ的用户名，默认是guest</span><br><span class="line">    password: oldou  #访问RabbitMQ的密码，默认是guest</span><br><span class="line">    virtual-host: &#x2F;  #访问RabbitMQ的哪一个虚拟主机，默认为 &#x2F;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：配置文件的名字必须要是application.yml，如果名称写错，那么访问的时候就一直时localhost。</p>
<p><strong>编写消息的启动类：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class RabbitConsumerApp &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(RabbitConsumerApp.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>书写好之后，在Linux启动RabbitMQ的前提下，首先在浏览器访问192.168.15.132:15672，并且登录用户进入管理界面，然后在IDEA中启动消息的启动类。这个时候控制台的输出中就有一个本机的端口，在管理界面中刷新，可以看见该端口。<br><img src="https://img-blog.csdnimg.cn/20200803173349625.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>我们也可以使用另外一种方式来书写消息类：<br>在消息类的同一个包下新建一个类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> *  日志消息消费者，消费 error和 warn 日志</span><br><span class="line"> *  error日志消息存储在队列中 log-error-queue</span><br><span class="line"> *  warn日志消息存储在队列中 log-warn-queue</span><br><span class="line"> *  使用的交换器名称为 log-ex-direct</span><br><span class="line"> *  交换器类型是 direct</span><br><span class="line"> *  队列的路由键是 direct-rk-error</span><br><span class="line"> *  队列的路由键是 direct-rk-warn</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Component    &#x2F;&#x2F;加这个注解表示让Spring容器做一下加载</span><br><span class="line">public class LogConsumer &#123;</span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">         @QueueBinding(</span><br><span class="line">             value &#x3D; @Queue(value &#x3D; &quot;log-error-queue&quot;),</span><br><span class="line">             exchange &#x3D; @Exchange(value &#x3D; &quot;log-ex-direct&quot;),</span><br><span class="line">             key &#x3D; &quot;direct-rk-error&quot;</span><br><span class="line">         )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onLogErrorMessage(String msg)&#123;</span><br><span class="line">        System.out.println(&quot;错误日志信息： &quot; + msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">         @QueueBinding(</span><br><span class="line">             value &#x3D; @Queue(value &#x3D; &quot;log-warn-queue&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">             exchange &#x3D; @Exchange(value &#x3D; &quot;log-ex-direct&quot;),</span><br><span class="line">             key&#x3D;&quot;direct-rk-warn&quot;</span><br><span class="line">         )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onLogWarnMessage(String msg)&#123;</span><br><span class="line">        System.out.println(&quot;警告日志信息 &quot;+msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重新启动以下启动类然后刷新一下网页可以看见：<br><img src="https://img-blog.csdnimg.cn/20200803173526227.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>1.1.1.4  编写生产者（消息生产者）</strong><br>首先在父工程下新建一个Model，名为（amqp-rabbit-publisher），然后在该工程下编写消息的发送类：LogMessageSender</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package com.rabbit.sender;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 发送消息的类型。</span><br><span class="line"> * 把消息发送到RabbitMQ中。</span><br><span class="line"> * 在spring-boot-starter-amqp中，启动器会自动创建并初始化一个AmqpTemplate，</span><br><span class="line"> * 作为访问Amqp消息服务器（MQ中间件）的客户端对象</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Component</span><br><span class="line">public class LogMessageSender &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private AmqpTemplate template;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 发送消息的方法</span><br><span class="line">     * template.convertAndSend(String exchange,String rountingKey,Object message);</span><br><span class="line">     * exchange - 交换器名称</span><br><span class="line">     * rountingKey - 路由器</span><br><span class="line">     * message - 要发送的消息内容，就是传递的消息对象的消息体</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public void sendMessage(String exchange,String rountingKey,String message)&#123;</span><br><span class="line">        this.template.convertAndSend(exchange,rountingKey,message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后编写一个启动类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class RabbitPublisherApp &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(RabbitPublisherApp.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再然后编写一个测试类如1.1.1.5：<br>编写配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  rabbitmq:</span><br><span class="line">    host: 192.168.15.132  # RabbitMQ服务的地址，默认localhost</span><br><span class="line">    username: oldou  #访问RabbitMQ的用户名，默认是guest</span><br><span class="line">    password: oldou  #访问RabbitMQ的密码，默认是guest</span><br></pre></td></tr></table></figure>
<p> <strong>1.1.1.5编写测试类</strong><br>SpringBoot 整合 Spring-AMQP 后包含内置对象 AmqpTemplate</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import com.rabbit.sender.LogMessageSender;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 消息发送者测试类型</span><br><span class="line"> *&#x2F;</span><br><span class="line">@SpringBootTest(classes &#x3D; RabbitPublisherApp.class)</span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">public class TestPublisher &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private LogMessageSender sender;</span><br><span class="line"></span><br><span class="line">    private String exchange &#x3D; &quot;log-ex-direct&quot;;</span><br><span class="line">    private String rkInfo &#x3D; &quot;direct-rk-info&quot;;</span><br><span class="line">    private String rkError &#x3D; &quot;direct-rk-error&quot;;</span><br><span class="line">    private String rkWarn &#x3D; &quot;direct-rk-warn&quot;;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testSend()&#123;</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line">        &#x2F;&#x2F;发送10条消息</span><br><span class="line">        for(int i&#x3D;0;i&lt;10;i++)&#123;</span><br><span class="line">            &#x2F;&#x2F;rInt%3 - 0 ：表示投递消息到Info; 1 表示投递消息到error; 2表示投递消息到warn</span><br><span class="line">            int rInt &#x3D; r.nextInt(10);</span><br><span class="line">            if(rInt%3 &#x3D;&#x3D; 0)&#123;</span><br><span class="line">                this.sender.sendMessage(exchange,rkInfo,&quot;发送Info日志消息 - index &#x3D; &quot;+ i + &quot;; rInt &quot;+rInt);</span><br><span class="line">            &#125;else if(rInt%3 &#x3D;&#x3D; 1)&#123;</span><br><span class="line">                this.sender.sendMessage(exchange,rkError,&quot;发送Error日志消息 - index &#x3D; &quot;+ i + &quot;; rInt &quot;+rInt);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                this.sender.sendMessage(exchange,rkWarn,&quot;发送Warn日志消息 - index &#x3D; &quot;+ i + &quot;; rInt &quot;+rInt);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先启动消费者consumer，然后在进入到消息的消费者测试类中启动，这个时候就可以看见消费者拿到消息，控制台输出如下：<br><img src="https://img-blog.csdnimg.cn/20200803173844110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>以上输出的信息为什么没有按照index=1/2/3/4/5…这样的顺序来输出呢？原因是因为处理的效率不一样，效率低的自然就处理时间长一点，因为输出就是这样。</p>
<h2 id="2-fanout-交换器（广播）"><a href="#2-fanout-交换器（广播）" class="headerlink" title="2 fanout 交换器（广播）"></a>2 fanout 交换器（广播）</h2><p><img src="https://img-blog.csdnimg.cn/20200803173916321.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>扇形交换器，实际上做的事情就是广播，fanout 会把消息发送给所有的绑定在当前交换器上的队列。<strong>对应 Consumer 依然采用公平调度方式</strong>。<br>        （代码演示）一个交换器需要绑定多个队列<br>        需要使用注解/API：<br>        FanoutExchange：fanout 交换器<br>        Binding：绑定交换器和队列<br>        BindingBuilder：Binding 的构建器<br>        amq.fanout:内置 fanout 交换器名称</p>
<h3 id="2-1-代码"><a href="#2-1-代码" class="headerlink" title="2.1 代码"></a>2.1 代码</h3><p>新建pojo工程，User类，在里面添加get/set方法、无参/带参构造、equals/hashcode、toString方法</p>
<p>项目总体结构如下：<br><img src="https://img-blog.csdnimg.cn/20200803174026786.png" alt="在这里插入图片描述"><br><strong>2.1.1 Publisher</strong><br>新建一个工程02rabbitMQfanout，然后新建一个消费者FanoutConsumer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 广播交换器，消费者</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Component</span><br><span class="line">public class FanoutConsumer &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 消费消息的方法</span><br><span class="line">     * @param user 消息体内容</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">            @QueueBinding(</span><br><span class="line">                    value &#x3D; @Queue(value &#x3D; &quot;queue-user-1&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">                    exchange &#x3D; @Exchange(value &#x3D; &quot;ex-fanout&quot;,type &#x3D; &quot;fanout&quot;,autoDelete &#x3D; &quot;false&quot;)</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onMessage(User user)&#123;</span><br><span class="line">        System.out.println(&quot;onMessage run : &quot; + user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 消费消息的方法</span><br><span class="line">     * @param user 消息体内容</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">            @QueueBinding(</span><br><span class="line">                    value &#x3D; @Queue(value &#x3D; &quot;queue-user-2&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">                    exchange &#x3D; @Exchange(value &#x3D; &quot;ex-fanout&quot;,type &#x3D; &quot;fanout&quot;)</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onMessage2(User user)&#123;</span><br><span class="line">        System.out.println(&quot;onMessage run : &quot; + user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后编写配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  rabbitmq:</span><br><span class="line">    host: 192.168.15.132</span><br><span class="line">    username: oldou</span><br><span class="line">    password: oldou</span><br></pre></td></tr></table></figure>
<p>Pom文件中的依赖：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot;</span><br><span class="line">         xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;artifactId&gt;02rabbitMQfanout&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;groupId&gt;com.bjsxt&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;&#x2F;parent&gt;</span><br><span class="line"></span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class="line"></span><br><span class="line">    &lt;artifactId&gt;consumer&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;artifactId&gt;pojo&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;com.bjsxt&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>
<p>编写测试类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class RabbitConsumer &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(RabbitConsumer.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动之后可以在管理平台上看见，接下来便是去书写发送者。</p>
<p><strong>2.1.2 编写发送方法</strong><br>发送者代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.rabbit;</span><br><span class="line"></span><br><span class="line">import com.entity.User;</span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 发送消息类型，消息发送到fanout交换器中</span><br><span class="line"> * 交换器名称是：ex-fanout</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Component</span><br><span class="line">public class UserMessageSender &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private AmqpTemplate template;</span><br><span class="line"></span><br><span class="line">    public void send(User user)&#123;</span><br><span class="line">        this.template.convertAndSend(&quot;ex-fanout&quot;,&quot;&quot;,user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class RabbitSender &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(RabbitSender.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  rabbitmq:</span><br><span class="line">    host: 192.168.15.132</span><br><span class="line">    username: oldou</span><br><span class="line">    password: oldou</span><br></pre></td></tr></table></figure>
<p>测试类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import com.entity.User;</span><br><span class="line">import com.rabbit.UserMessageSender;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 消息发送者测试类型</span><br><span class="line"> *&#x2F;</span><br><span class="line">@SpringBootTest(classes &#x3D; RabbitSender.class)</span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">public class TestPublisher &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private UserMessageSender sender;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testSendUserMessageToFanout()&#123;</span><br><span class="line">        for(int i&#x3D;0;i&lt;3;i++)&#123;</span><br><span class="line">            User user &#x3D; new User();</span><br><span class="line">            user.setId((long)i);</span><br><span class="line">            user.setName(&quot;姓名 - &quot; + i);</span><br><span class="line">            user.setAge(20 + i);</span><br><span class="line">            this.sender.send(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>pom文件：<br>···<br><?xml version="1.0" encoding="UTF-8"?><br><project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"><br>    <parent><br>        <artifactId>02rabbitMQfanout</artifactId><br>        <groupId>com.bjsxt</groupId><br>        <version>1.0-SNAPSHOT</version><br>    </parent><br>    <modelVersion>4.0.0</modelVersion></p>
<pre><code>&lt;artifactId&gt;publisher&lt;/artifactId&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;artifactId&gt;pojo&lt;/artifactId&gt;
        &lt;groupId&gt;com.bjsxt&lt;/groupId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</project>
···

<p>运行消息生产者，结果如下：<br><img src="https://img-blog.csdnimg.cn/20200803174429956.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>交换器把消息投入到两个队列当中，先进先出，那么两个Consumer消费消息的时候都是按照顺序依次消费，处理数据的时候是一起运行的，因为代码环境硬件都是一样的，而System.out.println是有缓存Buffer的，所以偶尔会有那么一两次是交叉输出的。</p>
<h2 id="3-topic-交换器-主题交换"><a href="#3-topic-交换器-主题交换" class="headerlink" title="3 topic 交换器(主题交换)"></a>3 topic 交换器(主题交换)</h2><p>它是最常用的交换器，也是功能最完整、功能最全的一种交换器，它能够实现点到点、点到面、点到部分的数据传输。<br><img src="https://img-blog.csdnimg.cn/20200803180700932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>允许在路由键（RoutingKey）中出现匹配规则。<br>路由键的写法和包写法相同。com.bjsxt.xxxx.xxx 格式。<br>在绑定时可以带有下面特殊符号，中间可以出现:<br>        * : 代表一个单词（两个.之间内容）<br>        # : 0 个或多个字符<br>接收方依然是公平调度，同一个队列中内容轮换获取值。<br>需要使用注解/API：<br>TopicExchange：Topic 交换器<br>amq.topic:内置 topic 交换器名称</p>
<h3 id="3-1-代码实现"><a href="#3-1-代码实现" class="headerlink" title="3.1 代码实现"></a>3.1 代码实现</h3><p>项目结构为：<br><img src="https://img-blog.csdnimg.cn/20200803180749575.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>3.1.1 Publisher</strong><br>首先新建一个子项目model—-topicPublisher<br>书写一段发送消息的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.rabbit;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.core.AmqpTemplate;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 发送消息到主题交换器</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Component</span><br><span class="line">public class TopicSender &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 发送消息的方法</span><br><span class="line">     * @param exchange</span><br><span class="line">     * @param rountingKey</span><br><span class="line">     * @param message</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public void send(String exchange,String rountingKey,String message)&#123;</span><br><span class="line">        amqpTemplate.convertAndSend(exchange,rountingKey,message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后书写启动类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class TopicRabbitMQSenderApp &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(TopicRabbitMQSenderApp.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>书写测试类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import com.rabbit.TopicSender;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line">import java.util.Random;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 消息发送者测试类型</span><br><span class="line"> *&#x2F;</span><br><span class="line">@SpringBootTest(classes &#x3D; TopicRabbitMQSenderApp.class)</span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">public class TestTopicSender &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private TopicSender topicSender1;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testSendMessageToTopic()&#123;</span><br><span class="line">        &#x2F;&#x2F;随机数%6</span><br><span class="line">        &#x2F;&#x2F; 0 rk - user.rk.sms       *.rk.*   *.rk.sms</span><br><span class="line">        &#x2F;&#x2F; 1 rk - user.rk.email     *.rk.*   *.rk.email</span><br><span class="line">        &#x2F;&#x2F; 2 rk - order.rk.sms      *.rk.*   *.rk.sms</span><br><span class="line">        &#x2F;&#x2F; 3 rk - order.rk.email    *.rk.*   *.rk.email</span><br><span class="line">        &#x2F;&#x2F; 4 rk - reg.rk.sms        *.rk.*   *.rk.sms</span><br><span class="line">        &#x2F;&#x2F; 5 rk - reg.rk.qq         *.rk.*</span><br><span class="line">        Random r &#x3D; new Random();</span><br><span class="line"></span><br><span class="line">        for(int i&#x3D;0;i&lt;10;i++)&#123;</span><br><span class="line">            int rInt &#x3D; r.nextInt(100);</span><br><span class="line">            if(rInt%6 &#x3D;&#x3D; 0)&#123;</span><br><span class="line">                this.topicSender1.send(&quot;ex-topic&quot;,&quot;user.rk.sms&quot;,&quot;用户登录验证码是123456 - 发送短信&quot;);</span><br><span class="line">            &#125;else if(rInt%6 &#x3D;&#x3D; 1)&#123;</span><br><span class="line">                this.topicSender1.send(&quot;ex-topic&quot;,&quot;user.rk.email&quot;,&quot;用户登录验证码是123456 - 发送到邮箱&quot;);</span><br><span class="line">            &#125;else if(rInt%6 &#x3D;&#x3D; 2)&#123;</span><br><span class="line">                this.topicSender1.send(&quot;ex-topic&quot;,&quot;order.rk.sms&quot;,&quot;订单下订成功 - 发送短信&quot;);</span><br><span class="line">            &#125;else if(rInt%6 &#x3D;&#x3D; 3)&#123;</span><br><span class="line">                this.topicSender1.send(&quot;ex-topic&quot;,&quot;order.rk.email&quot;,&quot;订单下订成功 - 发送到邮箱&quot;);</span><br><span class="line">            &#125;else if(rInt%6 &#x3D;&#x3D; 4)&#123;</span><br><span class="line">                this.topicSender1.send(&quot;ex-topic&quot;,&quot;reg.rk.sms&quot;,&quot;用户注册验证码是123456 - 发送短信&quot;);</span><br><span class="line">            &#125;else if(rInt%6 &#x3D;&#x3D; 5)&#123;</span><br><span class="line">                this.topicSender1.send(&quot;ex-topic&quot;,&quot;reg.rk.qq&quot;,&quot;用户注册验证码是123456 - 发送到QQ&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  rabbitmq:</span><br><span class="line">    host: 192.168.15.132</span><br><span class="line">    username: oldou</span><br><span class="line">    password: oldou</span><br></pre></td></tr></table></figure>
<p><strong>3.1.2 Consumer</strong><br>新建一个子项目topicConsumer，书写消费消息的代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">package com.rabbit;</span><br><span class="line"></span><br><span class="line">import org.springframework.amqp.rabbit.annotation.Exchange;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.Queue;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.QueueBinding;</span><br><span class="line">import org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 主题消息消费者</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Component</span><br><span class="line">public class TopicConsumer &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 短信消息消费者,对应的rountingKey是user.rk.sms | order.rk.sms | reg.rk.sms等</span><br><span class="line">     * 分别代表 - 用户登录短信 | 订单下订成功通知短信 | 支付成功通知短信 | 注册码通知短信 等。</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">            @QueueBinding(</span><br><span class="line">                    value &#x3D; @Queue(value &#x3D; &quot;queue-sms-topic&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">                    exchange &#x3D; @Exchange(value &#x3D; &quot;ex-topic&quot;,type &#x3D; &quot;topic&quot;),</span><br><span class="line">                    key &#x3D; &quot;*.rk.sms&quot;</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onUserSMSMessage(String message)&#123;</span><br><span class="line">        System.out.println(&quot;用户短信消息内容是： &quot; + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 路由键包括： user.rk.email | reg.rk.email | pay.rk.email 等</span><br><span class="line">     * @param message</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">            @QueueBinding(</span><br><span class="line">                    value &#x3D; @Queue(value &#x3D; &quot;queue-email-topic&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">                    exchange &#x3D; @Exchange(value &#x3D; &quot;ex-topic&quot;,type &#x3D; &quot;topic&quot;),</span><br><span class="line">                    key &#x3D; &quot;*.rk.email&quot;</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onUserEmailMessage(String message)&#123;</span><br><span class="line">        System.out.println(&quot;用户邮件消息内容是： &quot; + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 所有的和rk相关的消息，统一处理消费</span><br><span class="line">     * 包含的路由键有：user.rk.sms | user.rk.email | reg.rk.sms | reg.rk.email 等</span><br><span class="line">     * 不发短信，不发邮件，作为一个日志记录工具存在</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @RabbitListener(bindings &#x3D; &#123;</span><br><span class="line">            @QueueBinding(</span><br><span class="line">                    value &#x3D; @Queue(value &#x3D; &quot;queue-all-topic&quot;,autoDelete &#x3D; &quot;false&quot;),</span><br><span class="line">                    exchange &#x3D; @Exchange(value &#x3D; &quot;ex-topic&quot;,type &#x3D; &quot;topic&quot;),</span><br><span class="line">                    key &#x3D; &quot;*.rk.*&quot;</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    public void onUserServiceMessage(String message)&#123;</span><br><span class="line">        System.out.println(&quot;执行的消息处理逻辑是： &quot; + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主要是在配置路由键处，<em>表示所有的，</em>.rk.*就表示路由键中中间只要是rk的所有路由键都会执行这个方法。<br>测试类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class TopicRabbitMQApp &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(TopicRabbitMQApp.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  rabbitmq:</span><br><span class="line">    host: 192.168.15.132</span><br><span class="line">    username: oldou</span><br><span class="line">    password: oldou</span><br></pre></td></tr></table></figure>
<p>先启动消费者，当消息生产者一旦发送消息时，消费者就会根据路由键的类型去取消息并且根据类型进行输出，只要符合消费消息的都进行输出，以上测试代码输出如下：<br><img src="https://img-blog.csdnimg.cn/20200803181036453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="八、-传递对象类型参数"><a href="#八、-传递对象类型参数" class="headerlink" title="八、 传递对象类型参数"></a>八、 传递对象类型参数</h1><p>如果消息是对象类型，此对象的类型必须进行序列化，且需要给定序列化值<br><img src="https://img-blog.csdnimg.cn/20200803181132757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI0NjIxNQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>以上便是我学习RabbitMQ时整理的笔记，如果不正确的地方欢迎各位大佬们指正，上面的代码都是我测试过了的，如果出现异常或者是其他之类的错误，就需要好好检查一下代码、配置文件以及Linux的防火墙等等</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/08/03/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%88RabbitMQ%EF%BC%89%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/" data-id="ckf1warw6003no0uk555w734k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RabbitMQ%E5%AD%A6%E4%B9%A0/" rel="tag">RabbitMQ学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/08/05/Java%E9%9B%86%E5%90%88%E5%AE%B9%E5%99%A8%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86%EF%BC%882020%E7%89%88%EF%BC%89/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Java集合容器知识点整理
        
      </div>
    </a>
  
  
    <a href="/2020/07/29/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">设计模式之工厂模式的三种实现方式</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/">Java基础</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%9F%BA%E7%A1%80/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%AE%B9%E5%99%A8/">Java容器</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%AE%B9%E5%99%A8/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/">TCP/IP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/TCP-IP/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zookeeper/">Zookeeper</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Zookeeper/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zookeeper/%E9%9D%A2%E8%AF%95%E9%A2%98/">面试题</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">个人博客</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/">经验分享</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/">消息中间件</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">Java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%AE%B9%E5%99%A8/" rel="tag">Java容器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux%E5%AD%A6%E4%B9%A0/" rel="tag">Linux学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ%E5%AD%A6%E4%B9%A0/" rel="tag">RabbitMQ学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis%E5%AD%A6%E4%B9%A0/" rel="tag">Redis学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring%E5%AD%A6%E4%B9%A0/" rel="tag">Spring学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper%E5%AD%A6%E4%B9%A0/" rel="tag">Zookeeper学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" rel="tag">个人博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" rel="tag">经验分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">Java基础</a> <a href="/tags/Java%E5%AE%B9%E5%99%A8/" style="font-size: 10px;">Java容器</a> <a href="/tags/Linux%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">Linux学习</a> <a href="/tags/RabbitMQ%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">RabbitMQ学习</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/Redis%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">Redis学习</a> <a href="/tags/SpringBoot/" style="font-size: 12.5px;">SpringBoot</a> <a href="/tags/Spring%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">Spring学习</a> <a href="/tags/TCP-IP/" style="font-size: 10px;">TCP/IP</a> <a href="/tags/Zookeeper%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">Zookeeper学习</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">个人博客</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">学习笔记</a> <a href="/tags/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB/" style="font-size: 10px;">经验分享</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12.5px;">设计模式</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 17.5px;">面试题</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/09/SpringBoot%E4%B8%AD%E4%BD%BF%E7%94%A8Druid%E6%95%B4%E5%90%88JDBC/">SpringBoot整合JDBC</a>
          </li>
        
          <li>
            <a href="/2020/09/08/%E7%AC%AC%E4%B8%80%E4%B8%AASpringBoot%E7%A8%8B%E5%BA%8F%E4%BB%A5%E5%8F%8A%E5%B0%8F%E5%BD%A9%E8%9B%8B/">第一个SpringBoot程序以及启动图标设置</a>
          </li>
        
          <li>
            <a href="/2020/08/16/Redis%E5%9F%BA%E6%9C%AC%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8Redis%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81/">Redis基本事务以及实现乐观锁</a>
          </li>
        
          <li>
            <a href="/2020/08/16/Redis%E7%9A%84%E4%BA%94%E7%A7%8D%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%81%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/">Redis的数据类型（5种基础，3种特殊）</a>
          </li>
        
          <li>
            <a href="/2020/08/12/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8BRedis%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D%E3%80%81%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E6%96%B9%E5%BC%8F%E3%80%81%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/">Redis的常用命令、配置文件介绍、数据持久化方式、集群搭建</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Mr.ou<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>